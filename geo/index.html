<!doctype html>
<html lang = "en">
<head>

<meta charset= "UTF-8">

<title>Geolocation</title>

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Mobile IE needs ClearType for smoothing fonts -->
<meta http-equiv="cleartype" content="on">
<style>
	body {background-image:url(images/bg2.png)}
	body {font: 14px/24px 'Apple Chancery', Arial, sans-serif; color: black; width 100%; margin: 20px; text-align:center}
	header h1 {margin:0; width:100%; background: white; text-align:center; border:1px solid silver}
	#mainpic {text-align:center; margin: 10px auto}
	p {font-weight: 600}
	#mainlist ul {margin:0 auto; padding: 10px; width:50%; border: 3px solid magenta; background:cyan; opacity:0.8; text-shadow:1px 2px 2px gray}
	#mainlist ul li {list-style:none; font-weight:600}
	footer {margin:10px auto; padding 20px; width: 100%; border:2px solid silver; background:white; line-height:.5em}
	h3 {font-size:16px}
</style>


<!-- JavaScript is normally at the end of the body, except for Modernizr which enables HTML5 elements & feature detects -->
<script type="text/javascript" href="geo/bwh5.js" src="../javascript/phonegap-1.3.0.js"></script>
<script type="text/javascript">

	
	document.addEventListener("deviceready", onDeviceReady, false);
	
	//phonegap is ready
	function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }
	
	
	
		function getGeoLocation(){
		try {
		if (!!navigator.geolocation) return navigator.geolocation;
		else return undefined;
		}catch(e){
			return undefined;
			
		}
	}
	function show_coords(position){
		var lat= position.coords.latitude;
		var lon= position.coords.longitude;
		t.updateRow(0, [lat.toString(), lon.toString()]);
		dispResults();
		
	function dispResults(){
		element("results").innerHTML= t.getTableHTML();
	
	}
	
	
	}
	function init(){
		if ((geo= getGeoLocation())){
		statusMessage = "HTML5 Geolocation is supported";
		t.setHeader([Latitude, Longitude]);
		t.addRow(["&nbsp;", "&nbsp;" ])
		}else{
		statusMessage = "HTML5 Geolocation is not supported";
		}
		geo.getCurrentPostion(show_coords);
	}
	window.onload = function(){
		init();
	}



</script>
</head>
<body>

<div id= "content">
	<h1>HTML5 Geolocation</h1>
	
	<p class="message" id="statusMessage"/>
	<div id="results">
	<!--results shown here-->
	</div>

</div>
	
</body>
</html>